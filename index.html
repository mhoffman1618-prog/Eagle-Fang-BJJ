<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="EagleFang BJJ">
<meta name="theme-color" content="#0a0a0a">
<meta name="description" content="EagleFang BJJ Training Log - Track your Brazilian Jiu-Jitsu sessions">

<title>EagleFang BJJ</title>

<!-- Apple Touch Icon - Using SVG data URI -->

<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="icon" type="image/svg+xml" href="icon.svg">

<link rel="manifest" href="manifest.json">

<style>
@import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap');

* {
margin: 0;
padding: 0;
box-sizing: border-box;
-webkit-tap-highlight-color: transparent;
}

body {
font-family: 'Bebas Neue', 'Impact', sans-serif;
background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #0f0f1a 100%);
color: #e0e0e0;
min-height: 100vh;
min-height: -webkit-fill-available;
overflow-x: hidden;
}

html {
height: -webkit-fill-available;
}

.background-pattern {
position: fixed;
top: 0;
left: 0;
right: 0;
bottom: 0;
background-image:
radial-gradient(circle at 20% 80%, rgba(220, 38, 38, 0.1) 0%, transparent 50%),
radial-gradient(circle at 80% 20%, rgba(30, 58, 138, 0.15) 0%, transparent 50%),
repeating-linear-gradient(45deg, transparent, transparent 35px, rgba(255,255,255,0.01) 35px, rgba(255,255,255,0.01) 70px);
pointer-events: none;
z-index: 0;
}

header {
position: sticky;
top: 0;
z-index: 100;
padding: 20px 16px;
padding-top: max(20px, env(safe-area-inset-top));
border-bottom: 3px solid #dc2626;
background: linear-gradient(180deg, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.85) 100%);
backdrop-filter: blur(10px);
-webkit-backdrop-filter: blur(10px);
}

.header-content {
max-width: 1200px;
margin: 0 auto;
display: flex;
align-items: center;
justify-content: space-between;
flex-wrap: wrap;
gap: 16px;
}

.logo-section {
display: flex;
align-items: center;
gap: 16px;
}

.logo-container {
width: 60px;
height: 60px;
background: linear-gradient(135deg, #1a1a2e 0%, #0a0a15 100%);
border-radius: 12px;
display: flex;
align-items: center;
justify-content: center;
box-shadow: 0 4px 20px rgba(220, 38, 38, 0.4), inset 0 0 20px rgba(220, 38, 38, 0.1);
border: 2px solid rgba(220, 38, 38, 0.5);
flex-shrink: 0;
}

.logo-container svg {
overflow: visible;
}

.title-section h1 {
font-size: 32px;
font-weight: 400;
letter-spacing: 3px;
display: flex;
gap: 10px;
flex-wrap: wrap;
}

.title-eagle {
background: linear-gradient(180deg, #ffffff 0%, #e5e5e5 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
}

.title-fang {
background: linear-gradient(180deg, #dc2626 0%, #991b1b 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
}

.title-bjj {
background: linear-gradient(180deg, #9ca3af 0%, #6b7280 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
font-size: 28px;
}

.subtitle {
font-size: 10px;
letter-spacing: 4px;
color: #6b7280;
font-family: Arial, sans-serif;
text-transform: uppercase;
}

.nav-buttons {
display: flex;
gap: 8px;
}

.nav-btn {
padding: 10px 16px;
font-size: 14px;
letter-spacing: 2px;
border: 2px solid #374151;
background: transparent;
color: #9ca3af;
cursor: pointer;
border-radius: 8px;
transition: all 0.2s ease;
font-family: 'Bebas Neue', sans-serif;
}

.nav-btn.active {
border-color: #dc2626;
background: rgba(220, 38, 38, 0.2);
color: #dc2626;
}

main {
position: relative;
z-index: 10;
max-width: 1200px;
margin: 0 auto;
padding: 24px 16px;
padding-bottom: max(24px, env(safe-area-inset-bottom));
}

.card {
background: linear-gradient(145deg, rgba(30, 30, 40, 0.9) 0%, rgba(20, 20, 30, 0.95) 100%);
border-radius: 16px;
padding: 20px;
margin-bottom: 20px;
border: 1px solid rgba(220, 38, 38, 0.3);
box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255,255,255,0.05);
}

.card-label {
display: block;
font-size: 14px;
letter-spacing: 3px;
color: #dc2626;
margin-bottom: 12px;
font-family: 'Bebas Neue', sans-serif;
}

.sub-label {
display: block;
font-size: 12px;
letter-spacing: 2px;
color: #9ca3af;
margin-bottom: 8px;
font-family: 'Bebas Neue', sans-serif;
}

input[type="text"],
input[type="date"],
textarea {
width: 100%;
padding: 14px 16px;
font-size: 16px;
background: rgba(0, 0, 0, 0.4);
border: 2px solid rgba(107, 114, 128, 0.3);
border-radius: 8px;
color: #e0e0e0;
outline: none;
font-family: Arial, sans-serif;
-webkit-appearance: none;
appearance: none;
}

input:focus,
textarea:focus {
border-color: rgba(220, 38, 38, 0.5);
box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
}

input::placeholder,
textarea::placeholder {
color: #6b7280;
}

textarea {
resize: vertical;
line-height: 1.5;
min-height: 100px;
}

.sub-card {
background: rgba(0, 0, 0, 0.3);
border-radius: 12px;
padding: 16px;
margin-top: 16px;
border: 1px solid rgba(107, 114, 128, 0.2);
}

.grid-2 {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
gap: 20px;
margin-bottom: 20px;
}

.rounds-container {
display: flex;
flex-direction: column;
gap: 12px;
}

.round-item {
background: rgba(0, 0, 0, 0.3);
border-radius: 12px;
border: 1px solid rgba(107, 114, 128, 0.2);
overflow: hidden;
transition: all 0.2s ease;
}

.round-item.expanded {
background: rgba(220, 38, 38, 0.1);
border-color: rgba(220, 38, 38, 0.4);
}

.round-header {
width: 100%;
padding: 16px 20px;
display: flex;
align-items: center;
justify-content: space-between;
background: transparent;
border: none;
cursor: pointer;
color: #e0e0e0;
}

.round-header-left {
display: flex;
align-items: center;
gap: 12px;
}

.round-number {
width: 36px;
height: 36px;
background: rgba(107, 114, 128, 0.3);
border-radius: 8px;
display: flex;
align-items: center;
justify-content: center;
font-size: 18px;
font-family: 'Bebas Neue', sans-serif;
font-weight: bold;
}

.round-number.filled {
background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
}

.round-title {
font-size: 18px;
font-family: 'Bebas Neue', sans-serif;
letter-spacing: 2px;
}

.round-partner {
font-size: 14px;
color: #9ca3af;
font-family: Arial, sans-serif;
}

.round-arrow {
transition: transform 0.2s ease;
font-size: 16px;
}

.round-arrow.expanded {
transform: rotate(180deg);
}

.round-content {
padding: 0 20px 20px;
display: none;
flex-direction: column;
gap: 16px;
}

.round-content.show {
display: flex;
}

.photo-upload {
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
padding: 40px;
background: rgba(0, 0, 0, 0.3);
border: 2px dashed rgba(107, 114, 128, 0.4);
border-radius: 12px;
cursor: pointer;
transition: all 0.2s ease;
}

.photo-upload:hover {
border-color: rgba(220, 38, 38, 0.5);
}

.photo-upload-icon {
font-size: 48px;
margin-bottom: 12px;
}

.photo-upload-text {
font-size: 16px;
color: #9ca3af;
font-family: Arial, sans-serif;
}

.photo-preview {
position: relative;
}

.photo-preview img {
width: 100%;
max-height: 400px;
object-fit: cover;
border-radius: 12px;
}

.photo-remove {
position: absolute;
top: 12px;
right: 12px;
width: 40px;
height: 40px;
background: rgba(220, 38, 38, 0.9);
border: none;
border-radius: 8px;
color: white;
font-size: 20px;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
}

.action-buttons {
display: flex;
gap: 16px;
justify-content: center;
flex-wrap: wrap;
margin-top: 10px;
}

.btn-save {
padding: 18px 40px;
font-size: 20px;
letter-spacing: 3px;
background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
border: none;
border-radius: 12px;
color: white;
cursor: pointer;
font-family: 'Bebas Neue', sans-serif;
box-shadow: 0 8px 24px rgba(220, 38, 38, 0.4);
transition: all 0.2s ease;
}

.btn-clear {
padding: 18px 40px;
font-size: 20px;
letter-spacing: 3px;
background: transparent;
border: 2px solid #6b7280;
border-radius: 12px;
color: #9ca3af;
cursor: pointer;
font-family: 'Bebas Neue', sans-serif;
transition: all 0.2s ease;
}

.btn-save:active,
.btn-clear:active {
transform: scale(0.98);
}

.history-title {
font-size: 28px;
letter-spacing: 4px;
color: #dc2626;
margin-bottom: 24px;
font-family: 'Bebas Neue', sans-serif;
}

.empty-state {
text-align: center;
padding: 60px 20px;
background: rgba(30, 30, 40, 0.5);
border-radius: 16px;
border: 1px solid rgba(107, 114, 128, 0.2);
}

.empty-state-icon {
font-size: 64px;
}

.empty-state-text {
font-size: 18px;
color: #6b7280;
margin-top: 16px;
font-family: Arial, sans-serif;
}

.history-item {
background: linear-gradient(145deg, rgba(30, 30, 40, 0.9) 0%, rgba(20, 20, 30, 0.95) 100%);
border-radius: 16px;
padding: 20px;
margin-bottom: 16px;
border: 1px solid rgba(220, 38, 38, 0.3);
display: flex;
align-items: center;
justify-content: space-between;
flex-wrap: wrap;
gap: 16px;
}

.history-item-info {
flex: 1;
min-width: 200px;
}

.history-item-date {
font-size: 20px;
font-family: 'Bebas Neue', sans-serif;
letter-spacing: 2px;
margin-bottom: 8px;
}

.history-item-details {
font-size: 13px;
color: #9ca3af;
font-family: Arial, sans-serif;
line-height: 1.5;
}

.history-item-details span {
color: #dc2626;
}

.history-item-buttons {
display: flex;
gap: 12px;
}

.btn-edit {
padding: 12px 20px;
font-size: 14px;
letter-spacing: 2px;
background: rgba(34, 97, 34, 0.3);
border: 1px solid rgba(74, 222, 128, 0.5);
border-radius: 8px;
color: #4ade80;
cursor: pointer;
font-family: 'Bebas Neue', sans-serif;
}

.btn-view {
padding: 12px 20px;
font-size: 14px;
letter-spacing: 2px;
background: rgba(30, 58, 138, 0.3);
border: 1px solid rgba(59, 130, 246, 0.5);
border-radius: 8px;
color: #60a5fa;
cursor: pointer;
font-family: 'Bebas Neue', sans-serif;
}

.btn-delete {
padding: 12px 20px;
font-size: 14px;
letter-spacing: 2px;
background: rgba(127, 29, 29, 0.3);
border: 1px solid rgba(220, 38, 38, 0.5);
border-radius: 8px;
color: #f87171;
cursor: pointer;
font-family: 'Bebas Neue', sans-serif;
}

.btn-back {
padding: 12px 24px;
font-size: 16px;
letter-spacing: 2px;
background: transparent;
border: 1px solid #6b7280;
border-radius: 8px;
color: #9ca3af;
cursor: pointer;
font-family: 'Bebas Neue', sans-serif;
margin-bottom: 24px;
}

.view-entry {
background: linear-gradient(145deg, rgba(30, 30, 40, 0.9) 0%, rgba(20, 20, 30, 0.95) 100%);
border-radius: 16px;
padding: 24px;
border: 1px solid rgba(220, 38, 38, 0.3);
}

.view-entry-date {
font-size: 32px;
letter-spacing: 4px;
color: #dc2626;
margin-bottom: 8px;
font-family: 'Bebas Neue', sans-serif;
}

.view-entry-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 24px;
margin-bottom: 32px;
padding-bottom: 24px;
border-bottom: 1px solid rgba(107, 114, 128, 0.2);
}

.view-entry-field-label {
color: #9ca3af;
font-size: 12px;
letter-spacing: 2px;
font-family: 'Bebas Neue', sans-serif;
}

.view-entry-field-value {
font-size: 20px;
margin: 8px 0 0;
font-family: Arial, sans-serif;
}

.view-section-label {
color: #dc2626;
font-size: 14px;
letter-spacing: 2px;
font-family: 'Bebas Neue', sans-serif;
margin-bottom: 12px;
}

.view-notes {
font-size: 16px;
margin: 12px 0 0;
font-family: Arial, sans-serif;
line-height: 1.6;
color: #d1d5db;
background: rgba(0,0,0,0.2);
padding: 16px;
border-radius: 8px;
}

.view-photo {
width: 100%;
max-height: 400px;
object-fit: cover;
border-radius: 12px;
margin-top: 12px;
}

.view-round {
background: rgba(0, 0, 0, 0.3);
border-radius: 12px;
padding: 16px 20px;
margin-bottom: 12px;
border: 1px solid rgba(107, 114, 128, 0.2);
}

.view-round-header {
display: flex;
align-items: center;
gap: 12px;
}

.view-round-number {
width: 32px;
height: 32px;
background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
border-radius: 6px;
display: flex;
align-items: center;
justify-content: center;
font-size: 16px;
font-family: 'Bebas Neue', sans-serif;
}

.view-round-partner {
font-size: 18px;
font-family: Arial, sans-serif;
}

.view-round-notes {
font-size: 15px;
color: #9ca3af;
margin: 12px 0 0;
padding-left: 44px;
font-family: Arial, sans-serif;
line-height: 1.5;
}

.hidden {
display: none !important;
}

@keyframes fadeIn {
from { opacity: 0; transform: translateY(10px); }
to { opacity: 1; transform: translateY(0); }
}

.fade-in {
animation: fadeIn 0.3s ease;
}

::-webkit-scrollbar {
width: 8px;
}

::-webkit-scrollbar-track {
background: rgba(0, 0, 0, 0.2);
}

::-webkit-scrollbar-thumb {
background: rgba(220, 38, 38, 0.5);
border-radius: 4px;
}

@media (max-width: 600px) {
.title-section h1 {
font-size: 26px;
}

.title-bjj {
font-size: 22px;
}

.logo-container {
width: 50px;
height: 50px;
}

.nav-btn {
padding: 8px 12px;
font-size: 12px;
}

.btn-save,
.btn-clear {
padding: 16px 30px;
font-size: 18px;
}
}
</style>

</head>
<body>
<div class="background-pattern"></div>

<header>
<div class="header-content">
<div class="logo-section">
<div class="logo-container">
<svg viewBox="0 0 64 64" width="50" height="50">
<defs>
<linearGradient id="headGradient" x1="0%" y1="0%" x2="100%" y2="100%">
<stop offset="0%" stop-color="#ffffff" />
<stop offset="100%" stop-color="#e5e5e5" />
</linearGradient>
<linearGradient id="beakGradient" x1="0%" y1="0%" x2="100%" y2="100%">
<stop offset="0%" stop-color="#f59e0b" />
<stop offset="100%" stop-color="#d97706" />
</linearGradient>
<linearGradient id="bloodGradient" x1="0%" y1="0%" x2="0%" y2="100%">
<stop offset="0%" stop-color="#dc2626" />
<stop offset="100%" stop-color="#7f1d1d" />
</linearGradient>
</defs>

```
<ellipse cx="32" cy="22" rx="18" ry="16" fill="url(#headGradient)" />
<ellipse cx="26" cy="18" rx="6" ry="5" fill="#f5f5f5" />
<ellipse cx="38" cy="18" rx="6" ry="5" fill="#f5f5f5" />

<path d="M14 28 Q12 35 16 42 Q20 48 32 50 Q44 48 48 42 Q52 35 50 28 Q45 32 32 34 Q19 32 14 28Z" fill="#3d2914" />

<ellipse cx="26" cy="20" rx="4" ry="3.5" fill="#1a1a1a" />
<ellipse cx="38" cy="20" rx="4" ry="3.5" fill="#1a1a1a" />
<ellipse cx="27" cy="19.5" rx="2" ry="1.8" fill="#fbbf24" />
<ellipse cx="39" cy="19.5" rx="2" ry="1.8" fill="#fbbf24" />
<circle cx="27.5" cy="19" r="1" fill="#000" />
<circle cx="39.5" cy="19" r="1" fill="#000" />
<path d="M22 16 L30 18" stroke="#5d4520" stroke-width="2" stroke-linecap="round" />
<path d="M42 16 L34 18" stroke="#5d4520" stroke-width="2" stroke-linecap="round" />

<path d="M28 26 Q32 24 36 26 Q38 28 40 32 Q38 30 32 32 Q26 30 24 32 Q26 28 28 26Z" fill="url(#beakGradient)" />
<path d="M26 32 Q32 30 38 32 L40 36 Q38 38 32 40 Q26 38 24 36 Z" fill="url(#beakGradient)" />

<path d="M27 32 L28 35 L29 32 L30 35 L31 32 L32 35 L33 32 L34 35 L35 32 L36 35 L37 32" 
fill="none" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
<path d="M28 36 L29 33.5 L30 36 L31 33.5 L32 36 L33 33.5 L34 36 L35 33.5 L36 36" 
fill="none" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />

<ellipse cx="29" cy="42" rx="1.5" ry="3" fill="url(#bloodGradient)" />
<ellipse cx="32" cy="44" rx="1.8" ry="4" fill="url(#bloodGradient)" />
<ellipse cx="35" cy="41" rx="1.3" ry="2.5" fill="url(#bloodGradient)" />

<path d="M29 45 Q28.5 50 29 54 Q29.5 56 29 58" stroke="url(#bloodGradient)" stroke-width="2" stroke-linecap="round" fill="none" />
<path d="M32 48 Q31 55 32 62" stroke="url(#bloodGradient)" stroke-width="2.5" stroke-linecap="round" fill="none" />
<path d="M35 43.5 Q35.5 47 35 50" stroke="url(#bloodGradient)" stroke-width="1.8" stroke-linecap="round" fill="none" />

<ellipse cx="29" cy="59" rx="2" ry="2.5" fill="#dc2626" />
<ellipse cx="32" cy="64" rx="2.5" ry="3" fill="#b91c1c" />
<ellipse cx="35" cy="51" rx="1.8" ry="2" fill="#dc2626" />
</svg>
</div>
<div class="title-section">
<h1>
<span class="title-eagle">EAGLE</span>
<span class="title-fang">FANG</span>
<span class="title-bjj">BJJ</span>
</h1>
<p class="subtitle">Training Log System</p>
</div>
</div>

<div class="nav-buttons">
<button class="nav-btn active" id="btn-new" onclick="showView('new')">NEW ENTRY</button>
<button class="nav-btn" id="btn-history" onclick="showView('history')">HISTORY (<span id="entry-count">0</span>)</button>
</div>
</div>
```

</header>

<main>
<!-- New Entry View -->
<div id="view-new" class="fade-in">
<div class="grid-2">
<div class="card">
<label class="card-label">üìÖ DATE</label>
<input type="date" id="entry-date">
</div>

```
<div class="card">
<label class="card-label">ü•ã INSTRUCTOR</label>
<input type="text" id="entry-instructor" placeholder="Enter instructor name...">
</div>
</div>

<div class="card">
<label class="card-label">üî• TECHNIQUE COVERED</label>
<input type="text" id="entry-technique" placeholder="e.g., Armbar from guard, Triangle setup...">

<div class="sub-card">
<label class="sub-label">üìù TECHNIQUE NOTES</label>
<textarea id="entry-technique-notes" placeholder="Key details, tips, common mistakes to avoid..."></textarea>
</div>
</div>

<div class="card">
<label class="card-label">‚öîÔ∏è TRAINING ROUNDS (1-10)</label>
<div class="rounds-container" id="rounds-container"></div>
</div>

<div class="card">
<label class="card-label">üì∏ PHOTO</label>
<div id="photo-upload-area">
<label class="photo-upload" id="photo-upload-label">
<span class="photo-upload-icon">üì∑</span>
<span class="photo-upload-text">Click to upload a photo</span>
<input type="file" accept="image/*" id="photo-input" style="display: none;" onchange="handlePhotoUpload(event)">
</label>
</div>
<div class="photo-preview hidden" id="photo-preview">
<img id="photo-preview-img" src="" alt="Training session">
<button class="photo-remove" onclick="removePhoto()">‚úï</button>
</div>
</div>

<div class="action-buttons">
<button class="btn-save" id="btn-save" onclick="saveEntry()">üíæ SAVE ENTRY</button>
<button class="btn-clear" id="btn-clear" onclick="clearEntry()">üóëÔ∏è CLEAR</button>
<button class="btn-clear" id="btn-cancel-edit" style="display: none; border-color: #f59e0b; color: #f59e0b;" onclick="cancelEdit()">‚úï CANCEL EDIT</button>
</div>
</div>

<!-- History View -->
<div id="view-history" class="hidden fade-in">
<h2 class="history-title">üìú TRAINING HISTORY</h2>
<div id="history-list"></div>
</div>

<!-- View Entry View -->
<div id="view-entry" class="hidden fade-in">
<button class="btn-back" onclick="showView('history')">‚Üê BACK TO HISTORY</button>
<div class="view-entry" id="entry-details"></div>
</div>
```

</main>

<script>
// State
let entries = [];
let currentPhoto = null;
let expandedRounds = [1];
let selectedEntryId = null;
let editingEntryId = null; // Track if we're editing an existing entry

// Initialize
document.addEventListener('DOMContentLoaded', function() {
loadEntries();
setTodayDate();
renderRounds();
updateEntryCount();
});

function loadEntries() {
const saved = localStorage.getItem('eaglefang-bjj-entries');
if (saved) {
entries = JSON.parse(saved);
}
}

function saveEntries() {
localStorage.setItem('eaglefang-bjj-entries', JSON.stringify(entries));
updateEntryCount();
}

function updateEntryCount() {
document.getElementById('entry-count').textContent = entries.length;
}

function setTodayDate() {
const today = new Date().toISOString().split('T')[0];
document.getElementById('entry-date').value = today;
}

function showView(view) {
document.getElementById('view-new').classList.add('hidden');
document.getElementById('view-history').classList.add('hidden');
document.getElementById('view-entry').classList.add('hidden');

document.getElementById('btn-new').classList.remove('active');
document.getElementById('btn-history').classList.remove('active');

if (view === 'new') {
document.getElementById('view-new').classList.remove('hidden');
document.getElementById('btn-new').classList.add('active');
} else if (view === 'history') {
document.getElementById('view-history').classList.remove('hidden');
document.getElementById('btn-history').classList.add('active');
renderHistory();
} else if (view === 'entry') {
document.getElementById('view-entry').classList.remove('hidden');
document.getElementById('btn-history').classList.add('active');
renderEntryDetails();
}
}

function renderRounds() {
const container = document.getElementById('rounds-container');
container.innerHTML = '';

for (let i = 1; i <= 10; i++) {
const isExpanded = expandedRounds.includes(i);
const roundHTML = `
<div class="round-item ${isExpanded ? 'expanded' : ''}" id="round-${i}">
<button class="round-header" onclick="toggleRound(${i})">
<div class="round-header-left">
<span class="round-number" id="round-number-${i}">${i}</span>
<span class="round-title">ROUND ${i}</span>
<span class="round-partner" id="round-partner-display-${i}"></span>
</div>
<span class="round-arrow ${isExpanded ? 'expanded' : ''}" id="round-arrow-${i}">‚ñº</span>
</button>
<div class="round-content ${isExpanded ? 'show' : ''}" id="round-content-${i}">
<div>
<label class="sub-label">ü§ù TRAINING PARTNER</label>
<input type="text" id="round-partner-${i}" placeholder="Partner's name..." oninput="updatePartnerDisplay(${i})">
</div>
<div>
<label class="sub-label">üìù ROUND NOTES</label>
<textarea id="round-notes-${i}" placeholder="What happened? Submissions, positions, things to work on..."></textarea>

```
</div>
</div>
</div>
`;
container.innerHTML += roundHTML;
}
}

function toggleRound(roundNumber) {
const index = expandedRounds.indexOf(roundNumber);
if (index > -1) {
expandedRounds.splice(index, 1);
} else {
expandedRounds.push(roundNumber);
}

const roundItem = document.getElementById(`round-${roundNumber}`);
const content = document.getElementById(`round-content-${roundNumber}`);
const arrow = document.getElementById(`round-arrow-${roundNumber}`);

if (expandedRounds.includes(roundNumber)) {
roundItem.classList.add('expanded');
content.classList.add('show');
arrow.classList.add('expanded');
} else {
roundItem.classList.remove('expanded');
content.classList.remove('show');
arrow.classList.remove('expanded');
}
}

function updatePartnerDisplay(roundNumber) {
const partner = document.getElementById(`round-partner-${roundNumber}`).value;
const display = document.getElementById(`round-partner-display-${roundNumber}`);
const numberEl = document.getElementById(`round-number-${roundNumber}`);

display.textContent = partner ? `vs ${partner}` : '';

const notes = document.getElementById(`round-notes-${roundNumber}`).value;
if (partner || notes) {
numberEl.classList.add('filled');
} else {
numberEl.classList.remove('filled');
}
}

function handlePhotoUpload(event) {
const file = event.target.files[0];
if (file) {
const reader = new FileReader();
reader.onloadend = function() {
currentPhoto = reader.result;
document.getElementById('photo-preview-img').src = currentPhoto;
document.getElementById('photo-upload-area').classList.add('hidden');
document.getElementById('photo-preview').classList.remove('hidden');
};
reader.readAsDataURL(file);
}
}

function removePhoto() {
currentPhoto = null;
document.getElementById('photo-input').value = '';
document.getElementById('photo-preview').classList.add('hidden');
document.getElementById('photo-upload-area').classList.remove('hidden');
}

function getRoundsData() {
const rounds = [];
for (let i = 1; i <= 10; i++) {
rounds.push({
roundNumber: i,
partnerName: document.getElementById(`round-partner-${i}`).value,
notes: document.getElementById(`round-notes-${i}`).value
});
}
return rounds;
}

function saveEntry() {
const entryData = {
id: editingEntryId || Date.now(),
date: document.getElementById('entry-date').value,
instructor: document.getElementById('entry-instructor').value,
techniqueCovered: document.getElementById('entry-technique').value,
techniqueNotes: document.getElementById('entry-technique-notes').value,
rounds: getRoundsData(),
photo: currentPhoto,
savedAt: new Date().toISOString()
};

if (editingEntryId) {
// Update existing entry
const index = entries.findIndex(e => e.id === editingEntryId);
if (index !== -1) {
entries[index] = entryData;
}
editingEntryId = null;
document.getElementById('btn-save').textContent = 'üíæ SAVE ENTRY';
document.getElementById('btn-cancel-edit').style.display = 'none';
document.getElementById('btn-clear').style.display = 'inline-block';
alert('Training session updated! ü•ã');
} else {
// Add new entry
entries.push(entryData);
alert('Training session saved! ü•ã');
}

saveEntries();
clearEntry();
}

function clearEntry() {
document.getElementById('entry-date').value = new Date().toISOString().split('T')[0];
document.getElementById('entry-instructor').value = '';
document.getElementById('entry-technique').value = '';
document.getElementById('entry-technique-notes').value = '';

for (let i = 1; i <= 10; i++) {
document.getElementById(`round-partner-${i}`).value = '';
document.getElementById(`round-notes-${i}`).value = '';
document.getElementById(`round-partner-display-${i}`).textContent = '';
document.getElementById(`round-number-${i}`).classList.remove('filled');
}

removePhoto();
expandedRounds = [1];
renderRounds();

// Reset edit mode if active
if (editingEntryId) {
editingEntryId = null;
document.getElementById('btn-save').textContent = 'üíæ SAVE ENTRY';
document.getElementById('btn-cancel-edit').style.display = 'none';
document.getElementById('btn-clear').style.display = 'inline-block';
}
}

function renderHistory() {
const container = document.getElementById('history-list');

if (entries.length === 0) {
container.innerHTML = `
<div class="empty-state">
<span class="empty-state-icon">ü•ã</span>
<p class="empty-state-text">No training sessions logged yet. Start your journey!</p>
</div>
`;
return;
}

const sortedEntries = [...entries].reverse();
container.innerHTML = sortedEntries.map(entry => {
const activeRounds = entry.rounds.filter(r => r.partnerName || r.notes).length;
return `
<div class="history-item">
<div class="history-item-info">
<div class="history-item-date">${formatDate(entry.date)}</div>
<div class="history-item-details">
<span>Instructor:</span> ${entry.instructor || 'Not specified'} | 
<span>Technique:</span> ${entry.techniqueCovered || 'Not specified'} | 
<span>Rounds:</span> ${activeRounds}
</div>
</div>
<div class="history-item-buttons">
<button class="btn-view" data-action="view" data-id="${entry.id}">üëÅÔ∏è VIEW</button>
<button class="btn-edit" data-action="edit" data-id="${entry.id}">‚úèÔ∏è EDIT</button>
<button class="btn-delete" data-action="delete" data-id="${entry.id}">üóëÔ∏è DELETE</button>
</div>
</div>
`;
}).join('');

// Add event listeners to buttons
container.querySelectorAll('button[data-action]').forEach(btn => {
btn.addEventListener('click', function() {
const action = this.getAttribute('data-action');
const id = parseInt(this.getAttribute('data-id'), 10);

if (action === 'view') {
viewEntry(id);
} else if (action === 'edit') {
editEntry(id);
} else if (action === 'delete') {
deleteEntry(id);
}
});
});
}

function formatDate(dateString) {
const options = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' };
// Parse the date string as local time (not UTC) by adding T00:00:00
const [year, month, day] = dateString.split('-');
const date = new Date(year, month - 1, day);
return date.toLocaleDateString('en-US', options);
}

function viewEntry(id) {
selectedEntryId = id;
showView('entry');
}

function renderEntryDetails() {
const entry = entries.find(e => e.id === selectedEntryId);
if (!entry) return;

const activeRounds = entry.rounds.filter(r => r.partnerName || r.notes);

let roundsHTML = '';
if (activeRounds.length > 0) {
roundsHTML = activeRounds.map(round => `
<div class="view-round">
<div class="view-round-header">
<span class="view-round-number">${round.roundNumber}</span>
<span class="view-round-partner">${round.partnerName ? `vs ${round.partnerName}` : `Round ${round.roundNumber}`}</span>
</div>
${round.notes ? `<p class="view-round-notes">${round.notes}</p>` : ''}
</div>
`).join('');
} else {
roundsHTML = '<p style="color: #6b7280; font-family: Arial, sans-serif;">No rounds logged for this session.</p>';
}

document.getElementById('entry-details').innerHTML = `
<div class="view-entry-date">${formatDate(entry.date)}</div>

<div class="view-entry-grid">
<div>
<span class="view-entry-field-label">INSTRUCTOR</span>
<p class="view-entry-field-value">${entry.instructor || '‚Äî'}</p>
</div>
<div>
<span class="view-entry-field-label">TECHNIQUE COVERED</span>
<p class="view-entry-field-value">${entry.techniqueCovered || '‚Äî'}</p>
</div>
</div>

${entry.techniqueNotes ? `
<div style="margin-bottom: 32px;">
<span class="view-section-label">üìù TECHNIQUE NOTES</span>
<p class="view-notes">${entry.techniqueNotes}</p>
</div>
` : ''}

${entry.photo ? `
<div style="margin-bottom: 32px;">
<span class="view-section-label">üì∏ PHOTO</span>
<img src="${entry.photo}" alt="Training session" class="view-photo">
</div>
` : ''}

<div>
<span class="view-section-label">‚öîÔ∏è TRAINING ROUNDS</span>
<div style="margin-top: 16px;">
${roundsHTML}
</div>
</div>
`;
}

function deleteEntry(id) {
if (confirm('Are you sure you want to delete this training session?')) {
entries = entries.filter(e => e.id !== id);
saveEntries();
renderHistory();
}
}

function editEntry(id) {
const entry = entries.find(e => e.id === id);
if (!entry) return;

// Set editing mode
editingEntryId = id;

// Populate form with entry data
document.getElementById('entry-date').value = entry.date;
document.getElementById('entry-instructor').value = entry.instructor || '';
document.getElementById('entry-technique').value = entry.techniqueCovered || '';
document.getElementById('entry-technique-notes').value = entry.techniqueNotes || '';

// Populate rounds
entry.rounds.forEach((round, index) => {
const roundNum = index + 1;
document.getElementById(`round-partner-${roundNum}`).value = round.partnerName || '';
document.getElementById(`round-notes-${roundNum}`).value = round.notes || '';
updatePartnerDisplay(roundNum);
});

// Handle photo
if (entry.photo) {
currentPhoto = entry.photo;
document.getElementById('photo-preview-img').src = currentPhoto;
document.getElementById('photo-upload-area').classList.add('hidden');
document.getElementById('photo-preview').classList.remove('hidden');
} else {
removePhoto();
}

// Update UI for edit mode
document.getElementById('btn-save').textContent = 'üíæ UPDATE ENTRY';
document.getElementById('btn-cancel-edit').style.display = 'inline-block';
document.getElementById('btn-clear').style.display = 'none';

// Switch to new entry view
showView('new');

// Scroll to top
window.scrollTo({ top: 0, behavior: 'smooth' });
}

function cancelEdit() {
editingEntryId = null;
document.getElementById('btn-save').textContent = 'üíæ SAVE ENTRY';
document.getElementById('btn-cancel-edit').style.display = 'none';
document.getElementById('btn-clear').style.display = 'inline-block';
clearEntry();
showView('history');
}
```

</script>
</body>
</html>
