<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>EagleFang BJJ</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="color-scheme" content="dark">
<meta name="theme-color" content="#0a0a0f">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Barlow:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
/* Font-face fallback insurance */
@import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Barlow:wght@300;400;500;600;700&display=swap');
:root {
--bg-deep: #0a0a0f;
--bg-card: #12121c;
--bg-input: #1a1a2a;
--bg-hover: #1e1e30;
--accent: #e6a919;
--accent-dim: #b8871480;
--accent-glow: #e6a91930;
--text: #e8e6e1;
--text-dim: #8a8896;
--text-muted: #5a5868;
--border: #2a2a3a;
--danger: #e63946;
--danger-dim: #e6394630;
--success: #2ec46a;
--round-bg: #0f0f18;
}

- { margin: 0; padding: 0; box-sizing: border-box; }

body {
font-family: â€˜Barlowâ€™, -apple-system, BlinkMacSystemFont, sans-serif;
background: var(â€“bg-deep);
color: var(â€“text);
min-height: 100vh;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
}

/* === HEADER === */
.app-header {
position: sticky;
top: 0;
z-index: 100;
background: linear-gradient(180deg, var(â€“bg-deep) 0%, var(â€“bg-deep) 80%, transparent 100%);
padding: 20px 20px 30px;
text-align: center;
}

.logo-lockup {
display: flex;
align-items: center;
justify-content: center;
gap: 14px;
margin-bottom: 4px;
}

.eagle-icon {
width: 68px;
height: 68px;
filter: drop-shadow(0 0 12px var(â€“accent-dim));
}

.app-title {
font-family: â€˜Bebas Neueâ€™, sans-serif;
font-size: 2.6rem;
letter-spacing: 6px;
color: var(â€“accent);
text-shadow: 0 0 30px var(â€“accent-dim);
line-height: 1;
}

.app-subtitle {
font-size: 0.72rem;
letter-spacing: 5px;
text-transform: uppercase;
color: var(â€“text-muted);
font-weight: 500;
}

/* === TABS === */
.tab-bar {
display: flex;
gap: 4px;
padding: 0 20px;
margin-bottom: 20px;
}

.tab-btn {
flex: 1;
padding: 12px 8px;
background: var(â€“bg-card);
border: 1px solid var(â€“border);
color: var(â€“text-dim);
font-family: â€˜Barlowâ€™, -apple-system, BlinkMacSystemFont, sans-serif;
font-size: 0.82rem;
font-weight: 600;
letter-spacing: 2px;
text-transform: uppercase;
cursor: pointer;
transition: all 0.3s;
border-radius: 6px;
}

.tab-btn.active {
background: var(â€“accent);
color: var(â€“bg-deep);
border-color: var(â€“accent);
box-shadow: 0 4px 20px var(â€“accent-dim);
}

.tab-btn:not(.active):hover { background: var(â€“bg-hover); }

.tab-content { display: none; padding: 0 20px 100px; }
.tab-content.active { display: block; animation: fadeUp 0.35s ease; }

@keyframes fadeUp {
from { opacity: 0; transform: translateY(12px); }
to { opacity: 1; transform: translateY(0); }
}

/* === FORM STYLES === */
.form-section {
background: var(â€“bg-card);
border: 1px solid var(â€“border);
border-radius: 10px;
padding: 20px;
margin-bottom: 16px;
}

.section-label {
font-family: â€˜Bebas Neueâ€™, sans-serif;
font-size: 1.2rem;
letter-spacing: 3px;
color: var(â€“accent);
margin-bottom: 14px;
display: flex;
align-items: center;
gap: 10px;
}

.section-label .line {
flex: 1;
height: 1px;
background: var(â€“border);
}

label {
display: block;
font-size: 0.7rem;
font-weight: 600;
letter-spacing: 2px;
text-transform: uppercase;
color: var(â€“text-dim);
margin-bottom: 6px;
}

input[type=â€œtextâ€],
input[type=â€œdateâ€],
textarea,
select {
width: 100%;
padding: 12px 14px;
background: var(â€“bg-input);
border: 1px solid var(â€“border);
border-radius: 8px;
color: var(â€“text);
color-scheme: dark;
font-family: â€˜Barlowâ€™, -apple-system, BlinkMacSystemFont, sans-serif;
font-size: 0.95rem;
transition: border-color 0.25s, box-shadow 0.25s;
outline: none;
margin-bottom: 14px;
}

input:focus, textarea:focus, select:focus {
border-color: var(â€“accent);
box-shadow: 0 0 0 3px var(â€“accent-glow);
}

textarea { resize: vertical; min-height: 80px; }

/* === ROUNDS === */
.rounds-header {
display: flex;
align-items: center;
justify-content: space-between;
margin-bottom: 14px;
}

.round-count-controls {
display: flex;
align-items: center;
gap: 10px;
}

.round-count-btn {
width: 34px;
height: 34px;
border-radius: 50%;
border: 1px solid var(â€“border);
background: var(â€“bg-input);
color: var(â€“accent);
font-size: 1.2rem;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
transition: all 0.2s;
font-family: â€˜Barlowâ€™, -apple-system, BlinkMacSystemFont, sans-serif;
}

.round-count-btn:hover {
background: var(â€“accent);
color: var(â€“bg-deep);
border-color: var(â€“accent);
}

.round-count-display {
font-family: â€˜Bebas Neueâ€™, sans-serif;
font-size: 1.4rem;
color: var(â€“text);
min-width: 24px;
text-align: center;
}

.round-card {
background: var(â€“round-bg);
border: 1px solid var(â€“border);
border-radius: 8px;
padding: 16px;
margin-bottom: 10px;
transition: border-color 0.3s;
}

.round-card:hover { border-color: var(â€“accent-dim); }

.round-number {
font-family: â€˜Bebas Neueâ€™, sans-serif;
font-size: 1rem;
letter-spacing: 3px;
color: var(â€“accent);
margin-bottom: 10px;
padding-bottom: 8px;
border-bottom: 1px solid var(â€“border);
}

/* === PHOTO UPLOAD === */
.photo-upload-area {
border: 2px dashed var(â€“border);
border-radius: 10px;
padding: 30px 20px;
text-align: center;
cursor: pointer;
transition: all 0.3s;
position: relative;
overflow: hidden;
}

.photo-upload-area:hover {
border-color: var(â€“accent);
background: var(â€“accent-glow);
}

.photo-upload-area svg {
width: 36px;
height: 36px;
margin-bottom: 8px;
color: var(â€“text-muted);
}

.photo-upload-area p {
font-size: 0.82rem;
color: var(â€“text-dim);
}

.photo-upload-area input {
position: absolute;
inset: 0;
opacity: 0;
cursor: pointer;
}

.photo-previews {
display: flex;
flex-wrap: wrap;
gap: 10px;
margin-top: 12px;
}

.photo-thumb {
width: 80px;
height: 80px;
border-radius: 8px;
object-fit: cover;
border: 2px solid var(â€“border);
cursor: pointer;
transition: border-color 0.2s;
}

.photo-thumb:hover { border-color: var(â€“accent); }

.photo-thumb-wrapper {
position: relative;
}

.photo-remove {
position: absolute;
top: -6px;
right: -6px;
width: 22px;
height: 22px;
border-radius: 50%;
background: var(â€“danger);
color: white;
border: none;
font-size: 0.7rem;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
font-weight: 700;
}

/* === BUTTONS === */
.btn-primary {
width: 100%;
padding: 16px;
background: var(â€“accent);
color: var(â€“bg-deep);
border: none;
border-radius: 8px;
font-family: â€˜Bebas Neueâ€™, sans-serif;
font-size: 1.3rem;
letter-spacing: 4px;
cursor: pointer;
transition: all 0.3s;
box-shadow: 0 4px 20px var(â€“accent-dim);
}

.btn-primary:hover {
transform: translateY(-2px);
box-shadow: 0 8px 30px var(â€“accent-dim);
}

.btn-secondary {
padding: 10px 20px;
background: transparent;
border: 1px solid var(â€“border);
color: var(â€“text-dim);
border-radius: 6px;
font-family: â€˜Barlowâ€™, -apple-system, BlinkMacSystemFont, sans-serif;
font-size: 0.78rem;
font-weight: 600;
letter-spacing: 2px;
text-transform: uppercase;
cursor: pointer;
transition: all 0.2s;
}

.btn-secondary:hover {
border-color: var(â€“accent);
color: var(â€“accent);
}

.btn-danger {
padding: 10px 20px;
background: var(â€“danger-dim);
border: 1px solid var(â€“danger);
color: var(â€“danger);
border-radius: 6px;
font-family: â€˜Barlowâ€™, -apple-system, BlinkMacSystemFont, sans-serif;
font-size: 0.78rem;
font-weight: 600;
letter-spacing: 2px;
text-transform: uppercase;
cursor: pointer;
transition: all 0.2s;
}

.btn-danger:hover { background: var(â€“danger); color: white; }

/* === ENTRIES LIST === */
.entries-empty {
text-align: center;
padding: 60px 20px;
color: var(â€“text-muted);
}

.entries-empty svg {
width: 60px;
height: 60px;
margin-bottom: 16px;
opacity: 0.3;
}

.entries-empty p { font-size: 0.9rem; }

.entry-card {
background: var(â€“bg-card);
border: 1px solid var(â€“border);
border-radius: 10px;
padding: 18px;
margin-bottom: 12px;
cursor: pointer;
transition: all 0.25s;
}

.entry-card:hover {
border-color: var(â€“accent-dim);
transform: translateY(-2px);
box-shadow: 0 6px 24px rgba(0,0,0,0.3);
}

.entry-card-header {
display: flex;
justify-content: space-between;
align-items: flex-start;
margin-bottom: 10px;
}

.entry-date {
font-family: â€˜Bebas Neueâ€™, sans-serif;
font-size: 1.2rem;
letter-spacing: 2px;
color: var(â€“accent);
}

.entry-rounds-badge {
background: var(â€“accent-glow);
border: 1px solid var(â€“accent-dim);
color: var(â€“accent);
font-size: 0.7rem;
font-weight: 700;
letter-spacing: 1px;
padding: 4px 10px;
border-radius: 20px;
}

.entry-instructor {
font-size: 0.85rem;
color: var(â€“text-dim);
margin-bottom: 6px;
}

.entry-technique {
font-size: 0.95rem;
font-weight: 500;
color: var(â€“text);
}

.entry-photos-indicator {
margin-top: 8px;
font-size: 0.72rem;
color: var(â€“text-muted);
display: flex;
align-items: center;
gap: 4px;
}

/* === DETAIL VIEW === */
.detail-overlay {
position: fixed;
inset: 0;
background: var(â€“bg-deep);
z-index: 200;
overflow-y: auto;
display: none;
animation: fadeUp 0.3s ease;
}

.detail-overlay.active { display: block; }

.detail-header {
position: sticky;
top: 0;
background: var(â€“bg-deep);
padding: 16px 20px;
display: flex;
justify-content: space-between;
align-items: center;
border-bottom: 1px solid var(â€“border);
z-index: 10;
}

.detail-back {
background: none;
border: none;
color: var(â€“accent);
font-family: â€˜Barlowâ€™, -apple-system, BlinkMacSystemFont, sans-serif;
font-size: 0.85rem;
font-weight: 600;
cursor: pointer;
display: flex;
align-items: center;
gap: 6px;
letter-spacing: 1px;
}

.detail-actions { display: flex; gap: 8px; }

.detail-body { padding: 20px 20px 80px; }

.detail-date {
font-family: â€˜Bebas Neueâ€™, sans-serif;
font-size: 2rem;
letter-spacing: 3px;
color: var(â€“accent);
margin-bottom: 4px;
}

.detail-section {
margin-top: 24px;
padding-top: 20px;
border-top: 1px solid var(â€“border);
}

.detail-section-title {
font-family: â€˜Bebas Neueâ€™, sans-serif;
font-size: 1.1rem;
letter-spacing: 3px;
color: var(â€“accent);
margin-bottom: 12px;
}

.detail-field-label {
font-size: 0.7rem;
font-weight: 600;
letter-spacing: 2px;
text-transform: uppercase;
color: var(â€“text-muted);
margin-bottom: 4px;
}

.detail-field-value {
font-size: 0.95rem;
color: var(â€“text);
margin-bottom: 14px;
line-height: 1.6;
white-space: pre-wrap;
}

.detail-round-card {
background: var(â€“round-bg);
border: 1px solid var(â€“border);
border-radius: 8px;
padding: 14px;
margin-bottom: 8px;
}

.detail-photos {
display: flex;
flex-wrap: wrap;
gap: 10px;
}

.detail-photo {
width: 100px;
height: 100px;
border-radius: 8px;
object-fit: cover;
border: 2px solid var(â€“border);
cursor: pointer;
transition: transform 0.2s;
}

.detail-photo:hover { transform: scale(1.05); }

/* === LIGHTBOX === */
.lightbox {
position: fixed;
inset: 0;
background: rgba(0,0,0,0.95);
z-index: 500;
display: none;
align-items: center;
justify-content: center;
cursor: pointer;
}

.lightbox.active { display: flex; }

.lightbox img {
max-width: 95vw;
max-height: 90vh;
border-radius: 8px;
}

/* === CONFIRM DIALOG === */
.confirm-overlay {
position: fixed;
inset: 0;
background: rgba(0,0,0,0.7);
z-index: 300;
display: none;
align-items: center;
justify-content: center;
}

.confirm-overlay.active { display: flex; }

.confirm-box {
background: var(â€“bg-card);
border: 1px solid var(â€“border);
border-radius: 12px;
padding: 28px;
max-width: 340px;
text-align: center;
}

.confirm-box h3 {
font-family: â€˜Bebas Neueâ€™, sans-serif;
font-size: 1.3rem;
letter-spacing: 3px;
color: var(â€“danger);
margin-bottom: 10px;
}

.confirm-box p {
font-size: 0.88rem;
color: var(â€“text-dim);
margin-bottom: 22px;
}

.confirm-btns { display: flex; gap: 10px; }
.confirm-btns button { flex: 1; }

/* === TOAST === */
.toast {
position: fixed;
bottom: 30px;
left: 50%;
transform: translateX(-50%) translateY(80px);
background: var(â€“success);
color: var(â€“bg-deep);
padding: 12px 28px;
border-radius: 30px;
font-weight: 600;
font-size: 0.85rem;
letter-spacing: 1px;
z-index: 400;
transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
pointer-events: none;
}

.toast.show { transform: translateX(-50%) translateY(0); }

/* === SEARCH === */
.search-bar {
margin-bottom: 16px;
position: relative;
}

.search-bar input {
padding-left: 42px;
margin-bottom: 0;
}

.search-bar svg {
position: absolute;
left: 14px;
top: 50%;
transform: translateY(-50%);
width: 18px;
height: 18px;
color: var(â€“text-muted);
}

/* === RESPONSIVE === */
@media (min-width: 600px) {
.tab-content { max-width: 600px; margin: 0 auto; }
.tab-bar { max-width: 600px; margin: 0 auto 20px; }
}
</style>

</head>
<body>

<!-- HEADER -->

<div class="app-header">
<div class="logo-lockup">
<svg class="eagle-icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
<!-- MEAN VICIOUS EAGLE - bold emblem style -->
<!-- Head shape - sharp aggressive angles -->
<path d="M45 10 C30 10 18 20 16 32 C14 42 20 50 28 54 C24 52 16 52 12 54 C16 57 22 56 28 55 C32 60 38 62 44 62 C50 62 56 58 60 52 C64 46 66 38 64 30 C62 20 54 10 45 10Z" fill="#e0dace" stroke="#a09880" stroke-width="1.2"/>
<!-- Dark menacing eye socket -->
<path d="M36 26 C30 25 26 28 25 33 C24 38 28 42 34 42 C40 42 44 39 45 35 C46 30 42 26 36 26Z" fill="#0a0a12"/>
<!-- ANGRY brow - heavy, sharp, slanted down -->
<path d="M22 24 L30 20 L42 19 L50 22" stroke="#0a0a12" stroke-width="3.5" fill="none" stroke-linecap="round"/>
<path d="M24 27 L32 24 L42 23 L48 25" stroke="#0a0a12" stroke-width="1.5" fill="none" stroke-linecap="round"/>
<!-- Fierce eye - narrow, angry -->
<ellipse cx="35" cy="33" rx="4.5" ry="3.5" fill="#d4940a"/>
<ellipse cx="35" cy="33" rx="2.2" ry="3" fill="#0a0a0f"/>
<circle cx="36.5" cy="31.5" r="1" fill="white" opacity="0.8"/>
<!-- UPPER BEAK - big, sharp, hooked -->
<path d="M46 32 L54 30 L62 27 L70 24 L76 23 C80 23 82 26 81 29 C80 32 76 36 72 38 L66 40 L58 42 L50 43 L46 42Z" fill="#d4940a" stroke="#8a6a08" stroke-width="1"/>
<!-- Beak hook - vicious curved tip -->
<path d="M76 23 C80 23 83 25.5 83 29 C83 33 80 37 76 39 C73 41 70 41 68 39 L72 37 C76 34 79 31 81 29 C82 27 80 24 76 23Z" fill="#b07e06" stroke="#8a6a08" stroke-width="0.8"/>
<!-- LOWER JAW - open, aggressive -->
<path d="M46 42 L52 45 L60 46 L68 45 L74 42 C76 44 74 47 70 49 L62 51 L54 52 L48 50 L44 46Z" fill="#b07e06" stroke="#8a6a08" stroke-width="0.8"/>
<!-- GAP between jaws showing darkness -->
<path d="M48 42.5 L56 43 L64 42.5 L70 41 L72 42 L66 44.5 L58 45.5 L50 45 L46 43Z" fill="#0a0a12" opacity="0.6"/>
<!-- BIG FANGS - upper jaw -->
<path d="M50 42 L51.5 48 L53.5 42.5Z" fill="#f0ece0" stroke="#d0c8b8" stroke-width="0.5"/>
<path d="M56 42.8 L57.8 50 L60 43.2Z" fill="#f0ece0" stroke="#d0c8b8" stroke-width="0.5"/>
<path d="M63 42 L64.5 49 L66.5 42.5Z" fill="#f0ece0" stroke="#d0c8b8" stroke-width="0.5"/>
<path d="M69 40.5 L70 47 L71.5 41Z" fill="#f0ece0" stroke="#d0c8b8" stroke-width="0.5"/>
<path d="M74 38 L74.5 44 L76 38.5Z" fill="#f0ece0" stroke="#d0c8b8" stroke-width="0.5"/>
<!-- BIG FANGS - lower jaw -->
<path d="M52 45.5 L53.5 41 L55 45Z" fill="#f0ece0" stroke="#d0c8b8" stroke-width="0.5"/>
<path d="M58 46.2 L60 41 L62 46Z" fill="#f0ece0" stroke="#d0c8b8" stroke-width="0.5"/>
<path d="M65 45.5 L66.5 40.5 L68 45Z" fill="#f0ece0" stroke="#d0c8b8" stroke-width="0.5"/>
<path d="M71 43.5 L72 39 L73.5 43Z" fill="#f0ece0" stroke="#d0c8b8" stroke-width="0.5"/>
<!-- === BLOOD DRIPPING FROM BEAK === -->
<!-- Drip 1 - long thick drip -->
<path d="M51 48 C50.5 52 50 56 50.5 60 C50.6 63 50.2 66 50.5 68 C50.3 70 50.8 72 50.5 73" stroke="#9b0000" stroke-width="2.5" fill="none" stroke-linecap="round"/>
<ellipse cx="50.5" cy="75.5" rx="2.5" ry="3.2" fill="#9b0000"/>
<!-- Drip 2 - longest, thickest -->
<path d="M58 50 C57.5 54 57 58 57.3 62 C57.4 66 57 70 57.2 74 C57.1 77 57.5 80 57.3 82" stroke="#9b0000" stroke-width="3" fill="none" stroke-linecap="round"/>
<ellipse cx="57.3" cy="85" rx="3" ry="3.8" fill="#9b0000"/>
<!-- Drip 3 - medium -->
<path d="M64.5 49 C64 53 63.5 57 63.8 60 C63.9 63 63.5 66 63.7 67" stroke="#9b0000" stroke-width="2.2" fill="none" stroke-linecap="round"/>
<ellipse cx="63.7" cy="69.5" rx="2.2" ry="2.8" fill="#9b0000"/>
<!-- Drip 4 - short -->
<path d="M70 47 C69.8 50 69.5 53 69.7 55 C69.8 57 69.5 59 69.7 60" stroke="#9b0000" stroke-width="2" fill="none" stroke-linecap="round"/>
<ellipse cx="69.7" cy="62" rx="1.8" ry="2.4" fill="#9b0000"/>
<!-- Drip 5 - shortest from hook -->
<path d="M75 44 C74.8 47 74.5 49 74.7 51" stroke="#9b0000" stroke-width="1.8" fill="none" stroke-linecap="round"/>
<ellipse cx="74.7" cy="53" rx="1.5" ry="2" fill="#9b0000"/>
<!-- Blood splatter drops -->
<circle cx="52" cy="70" r="1" fill="#9b0000" opacity="0.7"/>
<circle cx="55" cy="78" r="0.8" fill="#9b0000" opacity="0.6"/>
<circle cx="61" cy="74" r="0.7" fill="#9b0000" opacity="0.5"/>
<circle cx="66" cy="65" r="0.9" fill="#9b0000" opacity="0.6"/>
<!-- Blood highlight/shine -->
<g opacity="0.35" fill="#ff2222">
<path d="M51 50 C50.8 53 50.6 55 51 56 L51.3 54Z"/>
<path d="M57.5 52 C57.2 56 57 60 57.5 62 L57.8 59Z"/>
<path d="M64.2 51 C64 54 63.8 56 64.2 57 L64.4 55Z"/>
</g>
<!-- Nostril -->
<ellipse cx="58" cy="29.5" rx="1.5" ry="1" fill="#6a5008" opacity="0.7"/>
<!-- Head feather texture -->
<g stroke="#b8b0a0" stroke-width="0.5" opacity="0.25" fill="none">
<path d="M30 16 C36 13 42 12 46 14"/>
<path d="M24 22 C30 19 38 18 44 20"/>
<path d="M20 32 C24 29 30 28 36 29"/>
<path d="M22 42 C26 39 32 38 38 40"/>
</g>
</svg>
<h1 class="app-title">EagleFang BJJ</h1>
</div>
<p class="app-subtitle">Training Log</p>
</div>

<!-- TABS -->

<div class="tab-bar">
<button class="tab-btn active" onclick="switchTab('new')">New Entry</button>
<button class="tab-btn" onclick="switchTab('entries')">My Entries</button>
</div>

<!-- NEW ENTRY TAB -->

<div id="tab-new" class="tab-content active">

<!-- Date & Instructor -->

<div class="form-section">
<div class="section-label">Session Info <span class="line"></span></div>
<label for="entry-date">Date</label>
<input type="date" id="entry-date">
<label for="entry-instructor">Instructor's Name</label>
<input type="text" id="entry-instructor" placeholder="e.g. Professor Silva">
</div>

<!-- Technique -->

<div class="form-section">
<div class="section-label">Technique Covered <span class="line"></span></div>
<label for="entry-technique">Technique Name</label>
<input type="text" id="entry-technique" placeholder="e.g. Arm bar from closed guard">
<label for="entry-technique-notes">Technique Notes</label>
<textarea id="entry-technique-notes" rows="4" placeholder="Detail the steps, key points, grips, transitions..."></textarea>
</div>

<!-- Training Rounds -->

<div class="form-section">
<div class="rounds-header">
<div class="section-label" style="margin-bottom:0">Training Rounds <span class="line"></span></div>
<div class="round-count-controls">
<button class="round-count-btn" onclick="changeRoundCount(-1)">âˆ’</button>
<span class="round-count-display" id="round-count-display">5</span>
<button class="round-count-btn" onclick="changeRoundCount(1)">+</button>
</div>
</div>
<div id="rounds-container"></div>
</div>

<!-- Photo Upload -->

<div class="form-section">
<div class="section-label">Photos <span class="line"></span></div>
<div class="photo-upload-area" id="photo-upload-area">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
<path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"/>
<path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0z"/>
</svg>
<p>Tap to add photos</p>
<input type="file" id="photo-input" accept="image/*" multiple>
</div>
<div class="photo-previews" id="photo-previews"></div>
</div>

<button class="btn-primary" id="save-btn" onclick="saveEntry()">Save Entry</button>

</div>

<!-- ENTRIES TAB -->

<div id="tab-entries" class="tab-content">
<div class="search-bar">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
<path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"/>
</svg>
<input type="text" id="search-input" placeholder="Search entries..." oninput="renderEntries()">
</div>
<div id="entries-list"></div>
</div>

<!-- DETAIL OVERLAY -->

<div class="detail-overlay" id="detail-overlay">
<div class="detail-header">
<button class="detail-back" onclick="closeDetail()">
â† BACK
</button>
<div class="detail-actions">
<button class="btn-secondary" onclick="editEntry()">Edit</button>
<button class="btn-danger" onclick="confirmDelete()">Delete</button>
</div>
</div>
<div class="detail-body" id="detail-body"></div>
</div>

<!-- LIGHTBOX -->

<div class="lightbox" id="lightbox" onclick="closeLightbox()">
<img id="lightbox-img" src="" alt="Full photo">
</div>

<!-- CONFIRM DIALOG -->

<div class="confirm-overlay" id="confirm-overlay">
<div class="confirm-box">
<h3>Delete Entry?</h3>
<p>This action cannot be undone.</p>
<div class="confirm-btns">
<button class="btn-secondary" onclick="closeConfirm()">Cancel</button>
<button class="btn-danger" onclick="deleteEntry()">Delete</button>
</div>
</div>
</div>

<!-- TOAST -->

<div class="toast" id="toast"></div>

<script>
// ========= STATE =========
let roundCount = 5;
let photos = []; // base64 strings
let entries = JSON.parse(localStorage.getItem('eaglefang_entries') || '[]');
let currentViewId = null;
let editingId = null;

// ========= INIT =========
function init() {
const today = new Date().toISOString().split('T')[0];
document.getElementById('entry-date').value = today;
renderRounds();
renderEntries();
document.getElementById('photo-input').addEventListener('change', handlePhotos);
}

// ========= TABS =========
function switchTab(tab) {
document.querySelectorAll('.tab-btn').forEach((b, i) => {
b.classList.toggle('active', (tab === 'new' && i === 0) || (tab === 'entries' && i === 1));
});
document.getElementById('tab-new').classList.toggle('active', tab === 'new');
document.getElementById('tab-entries').classList.toggle('active', tab === 'entries');
if (tab === 'entries') renderEntries();
}

// ========= ROUNDS =========
function changeRoundCount(delta) {
const next = roundCount + delta;
if (next < 1 || next > 10) return;
roundCount = next;
document.getElementById('round-count-display').textContent = roundCount;
renderRounds();
}

function renderRounds() {
const c = document.getElementById('rounds-container');
// preserve existing data
const existing = {};
c.querySelectorAll('.round-card').forEach(card => {
const n = card.dataset.round;
existing[n] = {
partner: card.querySelector('.round-partner')?.value || '',
notes: card.querySelector('.round-notes')?.value || ''
};
});

c.innerHTML = '';
for (let i = 1; i <= roundCount; i++) {
const prev = existing[i] || { partner: '', notes: '' };
c.innerHTML += `
<div class="round-card" data-round="${i}">
<div class="round-number">Round ${i}</div>
<label>Training Partner</label>
<input type="text" class="round-partner" placeholder="Partner's name" value="${esc(prev.partner)}">
<label>Round Notes</label>
<textarea class="round-notes" rows="2" placeholder="What happened this round...">${esc(prev.notes)}</textarea>

```
</div>`;
}
```

}

// ========= PHOTOS =========
function handlePhotos(e) {
const files = Array.from(e.target.files);
files.forEach(file => {
const reader = new FileReader();
reader.onload = () => {
photos.push(reader.result);
renderPhotoThumbs();
};
reader.readAsDataURL(file);
});
e.target.value = â€˜â€™;
}

function renderPhotoThumbs() {
const c = document.getElementById(â€˜photo-previewsâ€™);
c.innerHTML = photos.map((p, i) => ` <div class="photo-thumb-wrapper"> <img class="photo-thumb" src="${p}" onclick="openLightbox('${p.replace(/'/g, "\\'")}')"> <button class="photo-remove" onclick="removePhoto(${i})">âœ•</button> </div>`).join(â€™â€™);
}

function removePhoto(i) {
photos.splice(i, 1);
renderPhotoThumbs();
}

// ========= SAVE =========
function saveEntry() {
const date = document.getElementById(â€˜entry-dateâ€™).value;
const instructor = document.getElementById(â€˜entry-instructorâ€™).value.trim();
const technique = document.getElementById(â€˜entry-techniqueâ€™).value.trim();
const techniqueNotes = document.getElementById(â€˜entry-technique-notesâ€™).value.trim();

```
if (!date) { showToast('Please select a date'); return; }

const rounds = [];
document.querySelectorAll('.round-card').forEach((card, idx) => {
const partner = card.querySelector('.round-partner').value.trim();
const notes = card.querySelector('.round-notes').value.trim();
if (partner || notes) {
rounds.push({ round: idx + 1, partner, notes });
}
});

const entry = {
id: editingId || Date.now().toString(36) + Math.random().toString(36).slice(2, 6),
date, instructor, technique, techniqueNotes,
rounds, photos: [...photos],
roundCount
};

if (editingId) {
const idx = entries.findIndex(e => e.id === editingId);
if (idx !== -1) entries[idx] = entry;
editingId = null;
document.getElementById('save-btn').textContent = 'Save Entry';
} else {
entries.unshift(entry);
}

localStorage.setItem('eaglefang_entries', JSON.stringify(entries));
showToast(editingId ? 'Entry updated!' : 'Entry saved!');
clearForm();
switchTab('entries');
```

}

function clearForm() {
document.getElementById(â€˜entry-dateâ€™).value = new Date().toISOString().split(â€˜Tâ€™)[0];
document.getElementById(â€˜entry-instructorâ€™).value = â€˜â€™;
document.getElementById(â€˜entry-techniqueâ€™).value = â€˜â€™;
document.getElementById(â€˜entry-technique-notesâ€™).value = â€˜â€™;
roundCount = 5;
document.getElementById(â€˜round-count-displayâ€™).textContent = 5;
photos = [];
renderPhotoThumbs();
renderRounds();
editingId = null;
document.getElementById(â€˜save-btnâ€™).textContent = â€˜Save Entryâ€™;
}

// ========= ENTRIES LIST =========
function renderEntries() {
const q = document.getElementById(â€˜search-inputâ€™).value.toLowerCase();
const filtered = entries.filter(e => {
if (!q) return true;
return (e.date + e.instructor + e.technique + e.techniqueNotes +
e.rounds.map(r => r.partner + r.notes).join(â€™â€™)).toLowerCase().includes(q);
});

```
const c = document.getElementById('entries-list');
if (filtered.length === 0) {
c.innerHTML = `
<div class="entries-empty">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
<path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"/>
</svg>
<p>${q ? 'No matching entries found' : 'No entries yet. Start logging!'}</p>
</div>`;
return;
}

c.innerHTML = filtered.map(e => {
const d = formatDate(e.date);
const rc = e.rounds.length;
return `
<div class="entry-card" onclick="openDetail('${e.id}')">
<div class="entry-card-header">
<div class="entry-date">${d}</div>
${rc ? `<span class="entry-rounds-badge">${rc} ROUND${rc > 1 ? 'S' : ''}</span>` : ''}
</div>
${e.instructor ? `<div class="entry-instructor">Instructor: ${esc(e.instructor)}</div>` : ''}
${e.technique ? `<div class="entry-technique">${esc(e.technique)}</div>` : ''}
${e.photos && e.photos.length ? `<div class="entry-photos-indicator">ğŸ“· ${e.photos.length} photo${e.photos.length > 1 ? 's' : ''}</div>` : ''}
</div>`;
}).join('');
```

}

// ========= DETAIL VIEW =========
function openDetail(id) {
currentViewId = id;
const e = entries.find(x => x.id === id);
if (!e) return;

```
let html = `<div class="detail-date">${formatDate(e.date)}</div>`;

if (e.instructor) {
html += `<div class="detail-field-label">Instructor</div>
<div class="detail-field-value">${esc(e.instructor)}</div>`;
}

html += `<div class="detail-section">
<div class="detail-section-title">Technique</div>`;
if (e.technique) {
html += `<div class="detail-field-label">Technique Name</div>
<div class="detail-field-value">${esc(e.technique)}</div>`;
}
if (e.techniqueNotes) {
html += `<div class="detail-field-label">Notes</div>
<div class="detail-field-value">${esc(e.techniqueNotes)}</div>`;
}
html += `</div>`;

if (e.rounds.length) {
html += `<div class="detail-section">
<div class="detail-section-title">Training Rounds</div>`;
e.rounds.forEach(r => {
html += `<div class="detail-round-card">
<div class="round-number">Round ${r.round}</div>
${r.partner ? `<div class="detail-field-label">Partner</div><div class="detail-field-value">${esc(r.partner)}</div>` : ''}
${r.notes ? `<div class="detail-field-label">Round Notes</div><div class="detail-field-value">${esc(r.notes)}</div>` : ''}
</div>`;
});
html += `</div>`;
}

if (e.photos && e.photos.length) {
html += `<div class="detail-section">
<div class="detail-section-title">Photos</div>
<div class="detail-photos">
${e.photos.map(p => `<img class="detail-photo" src="${p}" onclick="openLightbox('${p.replace(/'/g, "\\'")}')">`).join('')}
</div>
</div>`;
}

document.getElementById('detail-body').innerHTML = html;
document.getElementById('detail-overlay').classList.add('active');
```

}

function closeDetail() {
document.getElementById(â€˜detail-overlayâ€™).classList.remove(â€˜activeâ€™);
currentViewId = null;
}

// ========= EDIT =========
function editEntry() {
const e = entries.find(x => x.id === currentViewId);
if (!e) return;
closeDetail();

```
editingId = e.id;
document.getElementById('entry-date').value = e.date;
document.getElementById('entry-instructor').value = e.instructor;
document.getElementById('entry-technique').value = e.technique;
document.getElementById('entry-technique-notes').value = e.techniqueNotes;

roundCount = e.roundCount || e.rounds.length || 5;
document.getElementById('round-count-display').textContent = roundCount;
renderRounds();

// fill in round data
e.rounds.forEach(r => {
const card = document.querySelector(`.round-card[data-round="${r.round}"]`);
if (card) {
card.querySelector('.round-partner').value = r.partner;
card.querySelector('.round-notes').value = r.notes;
}
});

photos = e.photos ? [...e.photos] : [];
renderPhotoThumbs();

document.getElementById('save-btn').textContent = 'Update Entry';
switchTab('new');
window.scrollTo({ top: 0, behavior: 'smooth' });
```

}

// ========= DELETE =========
function confirmDelete() {
document.getElementById(â€˜confirm-overlayâ€™).classList.add(â€˜activeâ€™);
}

function closeConfirm() {
document.getElementById(â€˜confirm-overlayâ€™).classList.remove(â€˜activeâ€™);
}

function deleteEntry() {
entries = entries.filter(e => e.id !== currentViewId);
localStorage.setItem(â€˜eaglefang_entriesâ€™, JSON.stringify(entries));
closeConfirm();
closeDetail();
renderEntries();
showToast(â€˜Entry deletedâ€™);
}

// ========= LIGHTBOX =========
function openLightbox(src) {
document.getElementById(â€˜lightbox-imgâ€™).src = src;
document.getElementById(â€˜lightboxâ€™).classList.add(â€˜activeâ€™);
}

function closeLightbox() {
document.getElementById(â€˜lightboxâ€™).classList.remove(â€˜activeâ€™);
}

// ========= TOAST =========
function showToast(msg) {
const t = document.getElementById(â€˜toastâ€™);
t.textContent = msg;
t.classList.add(â€˜showâ€™);
setTimeout(() => t.classList.remove(â€˜showâ€™), 2400);
}

// ========= UTILS =========
function esc(str) {
const d = document.createElement(â€˜divâ€™);
d.textContent = str || â€˜â€™;
return d.innerHTML;
}

function formatDate(dateStr) {
const [y, m, d] = dateStr.split(â€™-â€™);
const months = [â€˜Janâ€™,â€˜Febâ€™,â€˜Marâ€™,â€˜Aprâ€™,â€˜Mayâ€™,â€˜Junâ€™,â€˜Julâ€™,â€˜Augâ€™,â€˜Sepâ€™,â€˜Octâ€™,â€˜Novâ€™,â€˜Decâ€™];
return `${months[parseInt(m) - 1]} ${parseInt(d)}, ${y}`;
}

// ========= BOOT =========
init();
</script>

</body>
</html>
